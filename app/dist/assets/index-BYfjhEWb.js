var C=Object.defineProperty;var T=(o,e,t)=>e in o?C(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var s=(o,e,t)=>T(o,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();const R="modulepreload",A=function(o){return"/"+o},y={},P=function(e,t,i){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(t.map(l=>{if(l=A(l),l in y)return;y[l]=!0;const h=l.endsWith(".css"),b=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${b}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":R,h||(u.as="script"),u.crossOrigin="",u.href=l,c&&u.setAttribute("nonce",c),document.head.appendChild(u),h)return new Promise((E,L)=>{u.addEventListener("load",E),u.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return n.then(a=>{for(const c of a||[])c.status==="rejected"&&r(c.reason);return e().catch(r)})};class g{constructor(){s(this,"afterMount",[]);s(this,"beforeMountActive",[]);s(this,"afterDeactivate",[])}dispatchEvent(e){const t=this[e];if(e.includes("Active")){for(let i=0;i<t.length;i++)t[i]();return}for(;t.length!==0;)t.shift()()}}s(g,"compId",0);var p=new g;class w{constructor(e){s(this,"id");s(this,"component");s(this,"effects",[]);s(this,"effectuate",null);s(this,"rendered",!1);s(this,"published",!1);s(this,"preRendered",null);s(this,"reference",null);s(this,"subData",null);s(this,"_state",[]);s(this,"_state_index",0);this.component=e.bind(this),g.compId+=1,this.id=g.compId}preRender(){this.preRendered=this.render()}render(){if(this.effects=[],this.rendered=!1,!this.preRendered){this._state_index=0,this._state=[];const e=this.component();return e instanceof HTMLElement?(this.reference=e,this.effector.apply(this),this.rendered=!0,this.published=!0):console.error(" ✘  Cradova err :  Invalid html content, got  - "+e),e}else return this.preRendered}_effect(e){this.rendered||this.effects.push(e.bind(this))}async effector(){for(let e=0;e<this.effects.length;e++){const t=await this.effects[e].apply(this);typeof t=="function"&&p.afterDeactivate.push(t)}this.effects=[],this.effectuate&&(this.effectuate(),this.effectuate=null)}recall(){this.rendered?this.published&&setTimeout(()=>{this.activate()}):this.effectuate=()=>{this.published&&this.activate()}}async activate(){if(this.published=!1,!this.rendered)return;this._state_index=0;const e=this.reference;if(document.contains(e)){const t=this.component();t instanceof HTMLElement?(e.insertAdjacentElement("beforebegin",t),e.remove(),this.published=!0,this.reference=t,p.dispatchEvent("afterMount")):console.error(" ✘  Cradova err :  Invalid html, got  - "+t)}else this.reference=null,this.rendered=!1}}class v{constructor(e){s(this,"_name");s(this,"_html");s(this,"_template",document.createElement("div"));s(this,"_dropped",!1);s(this,"_snapshot");s(this,"_snapshot_html");s(this,"_deCB");const{template:t,name:i}=e;this._html=t,this._name=i||document.title,this._template.setAttribute("id","page"),this._snapshot=e.snapshotIsolation||!1}async _takeSnapShot(){if(d.doc.dataset.snapshot!=="true"){try{const e=await fetch(location.href);if(!e.ok)throw new Error("Failed to fetch the page");const t=await e.text(),i=new DOMParser().parseFromString(t,"text/html");i.title=this._name;const n=i.querySelector('[data-wrapper="app"]');if(n)n.setAttribute("data-snapshot","true"),n.innerHTML=this._snapshot_html;else{console.error("Wrapper or template is not found");return}const r=i.documentElement.outerHTML;await fetch(`${location.origin}`,{body:r,method:"POST",headers:{"Content-Type":"text/html","cradova-snapshot":location.href.slice(location.origin.length)}})}catch(e){console.error("Snapshot error:",e)}this._snapshot_html=void 0}}set onDeactivate(e){this._deCB=e}drop(e){if(typeof e=="boolean"){this._dropped=e;return}else return this._dropped}async _activate(){if(this._dropped){history.go(-1);return}let e=this._html.apply(this);if(e instanceof HTMLElement)this._template.innerHTML="",this._template.appendChild(e);else throw new Error(` ✘  Cradova err:  template function for the page returned ${e} instead of html`);document.title=this._name,d.doc.innerHTML="",p.dispatchEvent("beforeMountActive"),this._snapshot&&(this._snapshot_html=this._template.outerHTML),d.doc.appendChild(this._template),p.dispatchEvent("afterMount"),window.scrollTo({top:0,left:0,behavior:"instant"}),p.dispatchEvent("afterDeactivate"),this._snapshot&&this._takeSnapShot()}}class M{constructor(){s(this,"doc",null);s(this,"lastNavigatedRouteController");s(this,"nextRouteController");s(this,"lastNavigatedRoute");s(this,"pageShow",null);s(this,"pageHide",null);s(this,"errorHandler");s(this,"loadingPage",null);s(this,"pageData",{params:{}});s(this,"routes",{});s(this,"paused",!1)}route(e,t){return t||console.error(" ✘  Cradova err:  not a valid page  ",t),this.routes[e]=t}async router(e,t){var a,c;const i=window.location.href;let n,r;if(this.paused){window.location.hash="paused";return}if(this.nextRouteController?(n=this.nextRouteController,this.nextRouteController=void 0):[n,r]=this.checker(i),typeof n<"u")try{if(typeof n=="function"&&(this.loadingPage instanceof v&&await this.loadingPage._activate(),n=await n(),!n)){this.lastNavigatedRoute&&history.pushState({},i,this.lastNavigatedRoute);return}r&&(this.pageData.params=r),await n._activate(),this.lastNavigatedRouteController&&((c=(a=this.lastNavigatedRouteController)._deCB)==null||c.call(a)),this.lastNavigatedRoute=i,this.lastNavigatedRouteController=n}catch(l){typeof this.errorHandler=="function"?this.errorHandler(l,i):console.error(l)}else this.routes["*"]&&await this.routes["*"]._activate()}checker(e){if(e[0]!=="/"&&(e=e.slice(e.indexOf("/",8))),this.routes[e])return[this.routes[e],{path:e}];if(e.includes("?")){let t;const i={};if([e,t]=e.split("?"),new URLSearchParams(t).forEach((n,r)=>{i[r]=n}),this.routes[e])return[this.routes[e],i]}for(let t in this.routes){if(t.includes(":")){const i=e.split("/"),n=t.split("/");e.endsWith("/")&&i.pop();let r=0,a=0;if(n.length===i.length){for(let c=0;c<n.length;c++){if(n[c].includes(":")){a++;continue}i[c]===n[c]&&r++}if(r+a===n.length){const c={};for(let l=0;l<n.length;l++)n[l].includes(":")&&(c[n[l].split(":")[1]]=i[l]);return[this.routes[t],c]}}}if(t.includes("*")){const i=t.slice(0,-1);if(e.startsWith(i))return[this.routes[t],{extraPath:e.slice(i.length)}]}}return[]}}var d=new M;class m{static BrowserRoutes(e){for(let t in e){const i=e[t];typeof i=="object"&&typeof i.then=="function"||typeof i=="function"?d.routes[t]=async()=>{const n=typeof i=="function"?await i():await i;return d.route(t,n)}:d.route(t,i)}m._mount()}static pauseNavigation(){d.paused=!0,window.location.hash="paused"}static resumeNavigation(){d.paused=!1,window.location.replace(window.location.pathname+window.location.search),history.go(-1)}static navigate(e,t){typeof e!="string"&&console.error(" ✘  Cradova err:  href must be a defined path but got "+e+" instead");let i=null,n;e.includes(".")?window.location.href=e:([i,n]=d.checker(e),i&&(d.nextRouteController=i,window.history.pushState({},"",e)),d.pageData.params=n,d.pageData.data=t,d.router(null))}static setLoadingPage(e){if(e instanceof v)d.loadingPage=e;else throw new Error(" ✘  Cradova err:  Loading Page should be a cradova page class")}static get PageData(){return d.pageData}static addErrorHandler(e){if(typeof e=="function")d.errorHandler=e;else throw new Error(" ✘  Cradova err:  callback for error event is not a function")}static _mount(){let e=document.querySelector("[data-wrapper=app]");if(e)d.doc=e;else throw new Error(`✘  Cradova err: please add '<div data-wrapper="app"></div>' to the body of your index.html file `);window.addEventListener("pageshow",()=>d.router()),window.addEventListener("popstate",t=>{t.preventDefault(),d.router()})}}function _(o){const e=new DocumentFragment;for(let t of o)if(Array.isArray(t))e.appendChild(_(t));else{if(t instanceof w&&(t=t.render()),typeof t=="function"&&(t=t(),typeof t=="function"&&(t=t())),t instanceof HTMLElement||t instanceof DocumentFragment){e.appendChild(t);continue}typeof t=="string"&&e.appendChild(document.createTextNode(t))}return e}class S{constructor(){s(this,"tree",{})}bindAs(e){return[this,e]}elem(e){const t=this.tree[e];if(document.contains(t))return t;this.tree[e]=void 0}swap(e,t){[this.tree[e],this.tree[t]]=[this.tree[t],this.tree[e]]}_append(e,t){this.tree[e]=t}}var D=(o,e)=>{const t={};let i;if(e.length!==0)for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="function"&&(r=r()),r instanceof w&&(r=r.render()),r instanceof HTMLElement||r instanceof DocumentFragment){o.appendChild(r);continue}if(Array.isArray(r)){o.appendChild(_(r));continue}if(typeof r=="string"){i=r;continue}if(typeof r=="object"){Object.assign(t,r);continue}}else return o;if(typeof t=="object"&&o)for(let[n,r]of Object.entries(t)){if(n==="style"&&typeof r=="object"){Object.assign(o.style,r);continue}if(n==="href"){const a=r||"";a.includes("://")||o.addEventListener("click",c=>{var l;if(c.preventDefault(),m.navigate(o.href),a.includes("#")){const h=a.split("#").at(-1);(l=document.getElementById("#"+h))==null||l.scrollIntoView()}}),o.setAttribute(n,r);continue}if(n==="onmount"){p.afterMount.push(()=>{typeof t.onmount=="function"&&t.onmount.apply(o)});continue}if(n.includes("data-")||n.includes("aria-")){o.setAttribute(n,r);continue}if(Array.isArray(r)&&n=="ref"&&r[0]instanceof S){r[0]._append(r[1],o);continue}o[n]=r}return i!==void 0&&o.appendChild(document.createTextNode(i)),o},f=o=>(...e)=>D(document.createElement(o),e),j=f("a"),x=f("button"),I=f("div"),q=f("h1"),B=f("h2"),N=f("img"),F=f("p"),W=o=>{const e=document.createElement("div");Array.isArray(o)?e.innerHTML=o[0]:typeof o=="string"&&(e.innerHTML=o);const t=new DocumentFragment;return t.append(...Array.from(e.children)),t};const O=new v({snapshotIsolation:!0,name:"Cradova - CSSR",template(){return I({className:"rocket-container"},x("About",{className:"m-auto w-fit bg-[rebeccapurple] py-4 px-8 rounded-[999px] text-[#fff] text-[1.6rem]",onclick(){m.navigate("/about")}}),N({className:"rocket",src:"/icon.webp",onanimationend(){this.classList.add("orbit")}}))}});m.BrowserRoutes({"/":O,"/about":async()=>(await P(()=>import("./about-CI_5c8Py.js"),[])).aboutPage});export{F as I,j as N,I as R,W as a,x as c,q as o,v as q,B as v};
